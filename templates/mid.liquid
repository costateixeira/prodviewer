<div class="container rcorners mid">
  <p>
    Dose form:
    <b>
      {{ mid.manufacturedDoseForm.coding[0].display }}
    </b>
  </p>
  <p>
    Presentation unit:
    <b>
      {{ mid.unitOfPresentation.coding[0].display }}
    </b>
  </p>

  {% assign midings = entry | where: "resource.resourceType", "Ingredient" %}

  {% for midingr in midings %}

    {% assign miding = midingr.resource %}

    {% assign midid = mid.id | prepend: 'ManufacturedItemDefinition/' %}
    {% if miding.for[2].reference == midid %}
      <div class="container m-1 p-1 rcorners miding">
        Ingredient
        <b>
          {{ miding.idxxx }}</b>
        <p>
          Status:
          <b>
            {{ miding.status | capitalize }}
          </b>
        </p>

        <p>
          Role:
          <b>
            {{ miding.role.coding[0].display }}
          </b>
        </p>

        <p>
          Substance:
          <b>
            {{ miding.substance.code.concept.coding[0].display }}
          </b>
        </p>

        {% for strn in miding.substance.strength %}
          {% if strn.concentrationRatio %}
            <p>
              Concentration strength:
              <b>
                {{ strn.concentrationRatio.numerator.value }}{{ strn.concentrationRatio.numerator.unit }} /
                {{ strn.concentrationRatio.denominator.value }}{{ strn.concentrationRatio.denominator.unit }}
              </b>
            </p>
          {% endif %}
        {% endfor %}

        {% for strn in miding.substance.strength %}
          {% if strn.presentationRatio %}
            <p>
              Presentation strength:
              <b>
                {{ strn.presentationRatio.numerator.value }} {{ strn.presentationRatio.numerator.unit }} /

                {{ strn.presentationRatio.denominator.value }} {{ strn.presentationRatio.denominator.unit }}
              </b>
            </p>
          {% endif %}
        {% endfor %}
      </div>
      {% comment %}{% endcomment %}

    {% endif %}
  {% endfor %}
</div>